<nav class="easyfood-navbar navbar navbar-expand-lg bg-white py-3 shadow-sm">
  <div class="container-fluid navbar-container">
    <!-- Brand -->
    <a class="navbar-brand fw-bold fs-4" [routerLink]="brand.href">
      {{ brand.name }}
    </a>

    <!-- Mobile Button -->
    <button
      class="navbar-toggler border-0"
      type="button"
      (click)="toggleMenu()"
      [attr.aria-expanded]="!isCollapsed"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Links -->
    <div class="collapse navbar-collapse" [class.show]="!isCollapsed" id="navbarNav">
      <ul class="navbar-nav mx-auto align-items-lg-center">
        <!-- Normal links -->
        <li
          class="nav-item"
          *ngFor="let link of links"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }"
        >
          <a class="nav-link position-relative px-3 py-2" [routerLink]="link.to">
            {{ link.label }}
            <span class="underline"></span>
          </a>
        </li>

        <!-- Dropdown -->
        <li class="nav-item dropdown position-relative dropdown-wrapper">
          <button class="nav-link dropdown-toggle px-3 py-2" type="button">
            More
            <span class="underline"></span>
          </button>

          <ul class="dropdown-menu-custom mt-2 shadow-lg">
            <li><a class="dropdown-item-custom" routerLink="/careers">Careers</a></li>
            <li><a class="dropdown-item-custom" routerLink="/partners">Partners</a></li>
            <li><a class="dropdown-item-custom" routerLink="/support">Support</a></li>
          </ul>
        </li>
      </ul>

      <!-- Authenticated -->
      <div *ngIf="user$ | async as user; else guest" class="d-flex align-items-center gap-3">
        <span class="fw-semibold text-primary">Hi, {{ user.username }}</span>
        <button class="btn btn-outline-primary btn-sm fw-semibold" (click)="logout()">
          Logout
        </button>
      </div>

      <!-- Guest CTA -->
      <ng-template #guest>
        <a class="btn btn-primary fw-semibold px-4 py-2 shadow-sm" [routerLink]="cta.to">
          {{ cta.label }}
        </a>
      </ng-template>
    </div>
  </div>
</nav>
